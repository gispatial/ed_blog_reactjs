{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stronglyTypedResolver = exports.DeliveryItemStronglyTypeResolver = void 0;\n\nvar models_1 = require(\"../models\");\n\nvar DeliveryItemStronglyTypeResolver =\n/** @class */\nfunction () {\n  function DeliveryItemStronglyTypeResolver() {}\n\n  DeliveryItemStronglyTypeResolver.prototype.createEmptyItemInstanceOfType = function (type, typeResolvers) {\n    var resolver = this.getTypeResolver(type, typeResolvers);\n\n    if (!resolver) {\n      return this.createContentItem(undefined);\n    }\n\n    return this.createInstanceWithResolver(resolver, undefined);\n  };\n  /**\r\n   * Creates item instance using either TypeResolver (if registered) or returns ContentItem\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.createItemInstance = function (data, typeResolvers, itemResolver) {\n    var itemInstance;\n\n    if (itemResolver) {\n      itemInstance = itemResolver(data.item);\n    }\n\n    if (!itemInstance) {\n      var typeResolver = this.getTypeResolver(data.item.system.type, typeResolvers);\n\n      if (typeResolver) {\n        // type resolver is registered, create new instance of given type\n        itemInstance = this.createInstanceWithResolver(typeResolver, data);\n      } else {\n        // not type resolver is register for this type, use ContentItem\n        itemInstance = this.createContentItem(data.item);\n      }\n    }\n\n    if (!itemInstance) {\n      throw Error(\"Item with codename '\" + data.item.system.codename + \"' could not be instantiated\");\n    }\n\n    this.assignRequiredContentItemData(itemInstance, data.item);\n    return itemInstance;\n  };\n  /**\r\n   * Maps raw system response to strongly typed class\r\n   * @param rawSystem Raw system response\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.mapSystemAttributes = function (rawSystem) {\n    return new models_1.ContentItemSystemAttributes({\n      name: rawSystem.name,\n      codename: rawSystem.codename,\n      id: rawSystem.id,\n      lastModified: new Date(rawSystem.last_modified),\n      language: rawSystem.language,\n      type: rawSystem.type,\n      sitemapLocations: rawSystem.sitemap_locations,\n      collection: rawSystem.collection\n    });\n  };\n  /**\r\n   * Creates new instance of given type\r\n   * @param resolver Type resolver\r\n   * @param type Type of the content item\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.createInstanceWithResolver = function (resolver, data) {\n    return resolver.resolve(data);\n  };\n  /**\r\n   * Gets TypeResolver associated with given type (type = codename of Kentico Kontent content type)\r\n   * @param type Kentico Kontent content type codename\r\n   * @param resolvers Array of TypeResolver\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.getTypeResolver = function (type, resolvers) {\n    return resolvers.find(function (m) {\n      return m.type.toLowerCase() === type.toLowerCase();\n    });\n  };\n  /**\r\n   * Creates base ContentItem when content type does not have a strongly typed model\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.createContentItem = function (item) {\n    var contentItem = new models_1.ContentItem();\n\n    if (item) {\n      this.assignRequiredContentItemData(contentItem, item);\n    }\n\n    return contentItem;\n  };\n  /**\r\n   * Maps default properties (system & elements)\r\n   * @param item Mapped content item\r\n   * @param rawItem Raw content item from response\r\n   */\n\n\n  DeliveryItemStronglyTypeResolver.prototype.assignRequiredContentItemData = function (item, rawItem) {\n    item.system = this.mapSystemAttributes(rawItem.system);\n    item._raw = rawItem;\n  };\n\n  return DeliveryItemStronglyTypeResolver;\n}();\n\nexports.DeliveryItemStronglyTypeResolver = DeliveryItemStronglyTypeResolver;\nexports.stronglyTypedResolver = new DeliveryItemStronglyTypeResolver();","map":{"version":3,"sources":["../../lib/resolvers/delivery-item-strongly-type.resolver.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.stronglyTypedResolver = exports.DeliveryItemStronglyTypeResolver = void 0;\r\nvar models_1 = require(\"../models\");\r\nvar DeliveryItemStronglyTypeResolver = /** @class */ (function () {\r\n    function DeliveryItemStronglyTypeResolver() {\r\n    }\r\n    DeliveryItemStronglyTypeResolver.prototype.createEmptyItemInstanceOfType = function (type, typeResolvers) {\r\n        var resolver = this.getTypeResolver(type, typeResolvers);\r\n        if (!resolver) {\r\n            return this.createContentItem(undefined);\r\n        }\r\n        return this.createInstanceWithResolver(resolver, undefined);\r\n    };\r\n    /**\r\n     * Creates item instance using either TypeResolver (if registered) or returns ContentItem\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.createItemInstance = function (data, typeResolvers, itemResolver) {\r\n        var itemInstance;\r\n        if (itemResolver) {\r\n            itemInstance = itemResolver(data.item);\r\n        }\r\n        if (!itemInstance) {\r\n            var typeResolver = this.getTypeResolver(data.item.system.type, typeResolvers);\r\n            if (typeResolver) {\r\n                // type resolver is registered, create new instance of given type\r\n                itemInstance = this.createInstanceWithResolver(typeResolver, data);\r\n            }\r\n            else {\r\n                // not type resolver is register for this type, use ContentItem\r\n                itemInstance = this.createContentItem(data.item);\r\n            }\r\n        }\r\n        if (!itemInstance) {\r\n            throw Error(\"Item with codename '\" + data.item.system.codename + \"' could not be instantiated\");\r\n        }\r\n        this.assignRequiredContentItemData(itemInstance, data.item);\r\n        return itemInstance;\r\n    };\r\n    /**\r\n     * Maps raw system response to strongly typed class\r\n     * @param rawSystem Raw system response\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.mapSystemAttributes = function (rawSystem) {\r\n        return new models_1.ContentItemSystemAttributes({\r\n            name: rawSystem.name,\r\n            codename: rawSystem.codename,\r\n            id: rawSystem.id,\r\n            lastModified: new Date(rawSystem.last_modified),\r\n            language: rawSystem.language,\r\n            type: rawSystem.type,\r\n            sitemapLocations: rawSystem.sitemap_locations,\r\n            collection: rawSystem.collection\r\n        });\r\n    };\r\n    /**\r\n     * Creates new instance of given type\r\n     * @param resolver Type resolver\r\n     * @param type Type of the content item\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.createInstanceWithResolver = function (resolver, data) {\r\n        return resolver.resolve(data);\r\n    };\r\n    /**\r\n     * Gets TypeResolver associated with given type (type = codename of Kentico Kontent content type)\r\n     * @param type Kentico Kontent content type codename\r\n     * @param resolvers Array of TypeResolver\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.getTypeResolver = function (type, resolvers) {\r\n        return resolvers.find(function (m) { return m.type.toLowerCase() === type.toLowerCase(); });\r\n    };\r\n    /**\r\n     * Creates base ContentItem when content type does not have a strongly typed model\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.createContentItem = function (item) {\r\n        var contentItem = new models_1.ContentItem();\r\n        if (item) {\r\n            this.assignRequiredContentItemData(contentItem, item);\r\n        }\r\n        return contentItem;\r\n    };\r\n    /**\r\n     * Maps default properties (system & elements)\r\n     * @param item Mapped content item\r\n     * @param rawItem Raw content item from response\r\n     */\r\n    DeliveryItemStronglyTypeResolver.prototype.assignRequiredContentItemData = function (item, rawItem) {\r\n        item.system = this.mapSystemAttributes(rawItem.system);\r\n        item._raw = rawItem;\r\n    };\r\n    return DeliveryItemStronglyTypeResolver;\r\n}());\r\nexports.DeliveryItemStronglyTypeResolver = DeliveryItemStronglyTypeResolver;\r\nexports.stronglyTypedResolver = new DeliveryItemStronglyTypeResolver();\r\n//# sourceMappingURL=delivery-item-strongly-type.resolver.js.map"]},"metadata":{},"sourceType":"script"}